<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Fetal kidney clusters 3d interactive visualization</title>
		<meta charset="utf-8">
		<link rel="stylesheet" href="./css/jquery-ui.css">

	</head>

	<body>
		<h1>Fetal kidney tissue clusters with protein expression levels: 
		</h1>
		<p>Please mousedown and drag on the left to rotate both views.</p>
		<p>Adjust the slider to change the expression level contour.</p>
		<div>
		<span>
			<div id="container" style="width: 800px; height:800px; background-color:yellow; float:left"></div>
			<div id="container2" style="width: 800px; height:800px; background-color:yellow; display:inline-block"></div>
		</span>
		</div>
		<br>
		<div id="checkboxes" style="padding: 20px; clear: both">Categories:0&nbsp; </div>
		<div style="width: 400px; margin: 0 auto;">
			<label for="amount">Protein level:</label>
			<input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
			<div id="slider" style="width: 300px; margin: 0 auto;"></div>
			<div id="proteins"></div>
		</div>
		<div style="padding: 70px; clear: both">
			This visualization pairs a display of protein expression levels on the right
			with derived tissue categories on the left.
			Please view the source to examine the embedding
			mechanics.
		</div>

		<script src="./js/three.js"></script>

		<script src="./js/THREE.contourist.js"></script>
		<script src="./js/OrbitControls.js"></script>
		<script src="./js/jquery.min.js"></script>
		<script src="./js/jquery-ui.js"></script>
		<script src="./js/categories3d.js"></script>
		<script src="./js/all_proteins.js"></script>

		<script>

		var json_file_path = "./data/all_categories.json"
		var protein_file_path = "./data/all_proteins.json"

		var container_div_id = "container";
		var protein_div_id = "container2";
		var protein_selector_div = "proteins"

		var checkbox_div_id = "checkboxes";
		var slider_div_id = "slider";

		var category_colors = {
			// r, g, b, a
			1: [123,213,56, 0],
			2: [0,213,56, 0],
			3: [123,0,56, 0],
			4: [123,213,0, 0],
			5: [255,213,56, 0],
			6: [123,255,56, 1],
			7: [123,213,255, 0],
			8: [100,100,56, 0],
			9: [100,213,100, 0],
			10: [123,100,100, 0],
			11: [255,255,56, 0],
			12: [255,213,255, 0],
			13: [123,255,255, 0],
			14: [255,255,255, 0],
		};

		var max_opacity = 0.5;
		var horizontal_checkboxes = true;
		var info;

		function embed_callback(callback_info) {
			info = callback_info;
			embed_proteins(
				protein_file_path,
				info.camera,
				info.center,
				protein_div_id,
				slider_div_id,
				protein_selector_div,
			)
		}

		embed_categories(
			json_file_path,
			category_colors,
			container_div_id,
			checkbox_div_id,
			max_opacity,
			horizontal_checkboxes,
			embed_callback
		)

	</script>

</body>

</html>
